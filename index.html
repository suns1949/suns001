<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>专业性格测试 - 心理学分析</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* 全局样式 */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    :root {
      --primary: #4e54c8;
      --secondary: #8f94fb;
      --accent: #ff7a8a;
      --light: #f8f9fa;
      --dark: #343a40;
      --success: #28a745;
      --warning: #ffc107;
      --info: #17a2b8;
    }
    
    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e7f1 100%);
      color: var(--dark);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
    }
    
    header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 10px;
      background: linear-gradient(90deg, var(--accent), #ffd166, var(--accent));
      animation: rainbow 3s linear infinite;
    }
    
    @keyframes rainbow {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }
    
    h1 {
      font-size: 2.5rem;
      margin-bottom: 15px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    h2 {
      font-size: 1.8rem;
      margin-bottom: 20px;
      color: var(--primary);
    }
    
    h3 {
      font-size: 1.4rem;
      margin: 20px 0 10px;
      color: var(--secondary);
    }
    
    p {
      margin-bottom: 20px;
      font-size: 1.1rem;
    }
    
    .intro-text {
      background: rgba(255, 255, 255, 0.2);
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
      backdrop-filter: blur(5px);
    }
    
    .progress-bar {
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      margin: 20px 0;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), #ff9a9e);
      border-radius: 4px;
      width: 0%;
      transition: width 0.5s ease;
    }
    
    .progress-text {
      text-align: right;
      font-size: 0.9rem;
      color: var(--dark);
      margin-top: 5px;
    }
    
    /* 问题样式 */
    .question-container {
      padding: 20px 30px;
    }
    
    .question {
      background: #f8f9ff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      border: 1px solid #eaeaea;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .question:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }
    
    .question p {
      font-weight: 600;
      margin-bottom: 15px;
      font-size: 1.15rem;
    }
    
    .options {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .option {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      background: white;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid #e0e0e0;
      transition: all 0.3s ease;
    }
    
    .option:hover {
      border-color: var(--secondary);
      background: #f0f3ff;
    }
    
    .option.selected {
      border-color: var(--primary);
      background: #eef2ff;
      box-shadow: 0 0 0 3px rgba(78, 84, 200, 0.2);
    }
    
    .option input {
      margin-right: 12px;
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    
    .option label {
      cursor: pointer;
      font-size: 1rem;
      flex: 1;
    }
    
    /* 按钮样式 */
    button {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      padding: 14px 28px;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: block;
      width: 100%;
      max-width: 300px;
      margin: 20px auto;
      box-shadow: 0 4px 15px rgba(78, 84, 200, 0.3);
    }
    
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(78, 84, 200, 0.4);
    }
    
    button:active {
      transform: translateY(1px);
    }
    
    button.secondary {
      background: white;
      color: var(--primary);
      border: 2px solid var(--primary);
    }
    
    button.secondary:hover {
      background: #f0f3ff;
    }
    
    /* 支付和结果页面 */
    .page {
      padding: 30px;
      text-align: center;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .hidden {
      display: none;
    }
    
    .payment-options {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 30px 0;
      flex-wrap: wrap;
    }
    
    .payment-btn {
      width: 150px;
      height: 150px;
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: white;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .payment-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    
    .payment-btn i {
      font-size: 50px;
      margin-bottom: 15px;
    }
    
    .wechat {
      color: #09bb07;
      border: 2px solid #09bb07;
    }
    
    .alipay {
      color: #1677ff;
      border: 2px solid #1677ff;
    }
    
    /* 结果页面 */
    .personality-card {
      background: linear-gradient(135deg, #f0f4ff, #e6e9ff);
      border-radius: 15px;
      padding: 25px;
      margin: 30px 0;
      text-align: left;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      border-left: 5px solid var(--primary);
    }
    
    .personality-type {
      font-size: 2.5rem;
      font-weight: bold;
      color: var(--primary);
      text-align: center;
      margin: 15px 0;
    }
    
    .traits {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .trait {
      background: white;
      padding: 8px 15px;
      border-radius: 30px;
      font-size: 0.9rem;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }
    
    select {
      padding: 12px;
      font-size: 1rem;
      border-radius: 8px;
      border: 2px solid #e0e0e0;
      width: 100%;
      max-width: 300px;
      margin: 15px 0;
    }
    
    .accuracy-meter {
      display: flex;
      justify-content: center;
      gap: 5px;
      margin: 15px 0;
    }
    
    .meter-point {
      width: 30px;
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      transition: background 0.3s ease;
    }
    
    .meter-point.active {
      background: var(--accent);
    }
    
    /* 响应式设计 */
    @media (max-width: 768px) {
      .container {
        border-radius: 10px;
      }
      
      header {
        padding: 20px;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      .question-container {
        padding: 15px;
      }
      
      .payment-options {
        flex-direction: column;
        align-items: center;
      }
      
      .payment-btn {
        width: 100%;
        max-width: 200px;
      }
    }
    
    /* 动画效果 */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-brain"></i> 专业性格测试</h1>
      <div class="intro-text">
        <p>基于MBTI心理学模型与色彩学的专业性格测试</p>
        <p>通过30道精心设计的题目，全面分析您的性格特征与行为模式</p>
      </div>
    </header>
    
    <!-- 测试页面 -->
    <div id="quiz-container" class="page">
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      <p class="progress-text" id="progress-text">问题 1/30</p>
      
      <div id="quiz-form" class="question-container">
        <!-- 问题将通过JS动态生成 -->
      </div>
      
      <button id="submit-btn">提交测试</button>
    </div>
    
    <!-- 支付页面 -->
    <div id="payment-container" class="page hidden">
      <h2><i class="fas fa-lock"></i> 解锁完整报告</h2>
      <p>您已完成测试，支付后即可查看专业的性格分析报告</p>
      
      <div class="payment-options">
        <div class="payment-btn wechat" id="wechat-pay">
          <i class="fab fa-weixin"></i>
          <span>微信支付</span>
        </div>
        <div class="payment-btn alipay" id="alipay-pay">
          <i class="fab fa-alipay"></i>
          <span>支付宝支付</span>
        </div>
      </div>
      
      <p>支付成功后，您将获得：</p>
      <ul style="text-align: left; max-width: 500px; margin: 20px auto;">
        <li>详细的性格类型分析</li>
        <li>职业发展建议</li>
        <li>人际关系指导</li>
        <li>个人成长策略</li>
        <li>专属PDF报告下载</li>
      </ul>
    </div>
    
    <!-- 结果页面 -->
    <div id="result-container" class="page hidden">
      <h2><i class="fas fa-chart-bar"></i> 您的性格分析报告</h2>
      <p>基于您的回答，我们进行了专业的心理学分析</p>
      
      <div class="personality-card">
        <h3>您的性格类型</h3>
        <div class="personality-type" id="personality-type">ISTJ</div>
        
        <div class="traits">
          <span class="trait">务实可靠</span>
          <span class="trait">注重细节</span>
          <span class="trait">有条理</span>
          <span class="trait">负责任</span>
        </div>
        
        <h3>性格描述</h3>
        <p id="result-text">您是一个非常实际、谨慎的人，倾向于遵守规则，注重稳定和实际。您适合在职场中担任分析性、组织性的工作，例如项目经理、工程师等。</p>
      </div>
      
      <div style="margin: 30px 0;">
        <h3>测试准确度反馈</h3>
        <p>请评价本次测试结果与您自身性格的匹配程度</p>
        
        <div class="accuracy-meter">
          <div class="meter-point" data-value="1"></div>
          <div class="meter-point" data-value="2"></div>
          <div class="meter-point" data-value="3"></div>
          <div class="meter-point" data-value="4"></div>
          <div class="meter-point" data-value="5"></div>
        </div>
        <p id="accuracy-text">一般准确</p>
        
        <button id="feedback-btn" class="secondary">提交反馈</button>
      </div>
    </div>
  </div>

  <script>
    // 完整的30道测试题目
    const questions = [
      { 
        question: "在社交场合中，你通常如何表现？", 
        options: ['更倾向于独处，享受安静', '更倾向于社交，主动交流'],
        dimension: 'EI'
      },
      { 
        question: "当遇到挑战时，你通常会：", 
        options: ['通过逻辑分析解决', '依赖情感和直觉'],
        dimension: 'TF'
      },
      { 
        question: "你更倾向于相信：", 
        options: ['具体的事实和数据', '潜在的可能性和意义'],
        dimension: 'SN'
      },
      { 
        question: "你更喜欢哪种工作方式？", 
        options: ['有计划的、有组织的', '灵活的、随性的'],
        dimension: 'JP'
      },
      { 
        question: "在做决定时，你更注重：", 
        options: ['客观标准和原则', '人际关系和影响'],
        dimension: 'TF'
      },
      { 
        question: "你更愿意被描述为：", 
        options: ['实际和务实', '富有想象力和创新'],
        dimension: 'SN'
      },
      { 
        question: "在空闲时间，你更喜欢：", 
        options: ['与朋友聚会', '独自阅读或思考'],
        dimension: 'EI'
      },
      { 
        question: "你更擅长：", 
        options: ['按部就班完成任务', '即兴发挥和适应变化'],
        dimension: 'JP'
      },
      { 
        question: "你更倾向于关注：", 
        options: ['当前的现实情况', '未来的可能性'],
        dimension: 'SN'
      },
      { 
        question: "当别人情绪低落时，你通常会：", 
        options: ['提供实际的解决方案', '给予情感支持和安慰'],
        dimension: 'TF'
      },
      { 
        question: "在团队中，你更倾向于：", 
        options: ['领导并组织大家', '支持并协助他人'],
        dimension: 'EI'
      },
      { 
        question: "你更喜欢：", 
        options: ['明确的目标和期限', '灵活开放的选择'],
        dimension: 'JP'
      },
      { 
        question: "你更相信：", 
        options: ['经验和传统', '创新和变革'],
        dimension: 'SN'
      },
      { 
        question: "在争论中，你更注重：", 
        options: ['逻辑和事实', '和谐与感受'],
        dimension: 'TF'
      },
      { 
        question: "你获得能量的方式主要是：", 
        options: ['与他人互动', '独处思考'],
        dimension: 'EI'
      },
      { 
        question: "你更喜欢的工作环境是：", 
        options: ['有序、可预测的', '灵活、充满变化的'],
        dimension: 'JP'
      },
      { 
        question: "你更倾向于：", 
        options: ['关注细节和具体信息', '关注整体和抽象概念'],
        dimension: 'SN'
      },
      { 
        question: "在评价他人时，你更看重：", 
        options: ['能力和成就', '动机和意图'],
        dimension: 'TF'
      },
      { 
        question: "在聚会中，你通常是：", 
        options: ['最后离开的人之一', '最早离开的人之一'],
        dimension: 'EI'
      },
      { 
        question: "你更倾向于：", 
        options: ['提前计划好一切', '顺其自然灵活应对'],
        dimension: 'JP'
      },
      { 
        question: "你更关注：", 
        options: ['现实和实际', '可能性和潜力'],
        dimension: 'SN'
      },
      { 
        question: "在沟通中，你更注重：", 
        options: ['准确性和事实', '关系和氛围'],
        dimension: 'TF'
      },
      { 
        question: "当你感到疲惫时，你更愿意：", 
        options: ['与朋友聊天放松', '独自休息恢复'],
        dimension: 'EI'
      },
      { 
        question: "你更喜欢：", 
        options: ['完成决定并继续前进', '保留选择权保持开放'],
        dimension: 'JP'
      },
      { 
        question: "你更擅长处理：", 
        options: ['具体细节', '抽象概念'],
        dimension: 'SN'
      },
      { 
        question: "在做出判断时，你更依赖：", 
        options: ['客观分析', '主观价值'],
        dimension: 'TF'
      },
      { 
        question: "在社交场合中，你通常是：", 
        options: ['主动发起对话的人', '等待别人发起对话的人'],
        dimension: 'EI'
      },
      { 
        question: "你更喜欢的工作方式是：", 
        options: ['有计划、有步骤的', '即兴发挥、灵活应变的'],
        dimension: 'JP'
      },
      { 
        question: "你更倾向于：", 
        options: ['关注当下实际', '展望未来可能'],
        dimension: 'SN'
      },
      { 
        question: "当别人需要帮助时，你更倾向于：", 
        options: ['提供实际的解决方案', '提供情感上的支持'],
        dimension: 'TF'
      }
    ];

    // MBTI性格类型结果描述
    const results = {
      "ISTJ": {
        type: "ISTJ",
        name: "检查员型",
        description: "您是一个非常实际、谨慎的人，倾向于遵守规则，注重稳定和实际。您做事有条理、负责任，注重细节和准确性。在工作中，您喜欢有明确的结构和流程，能够可靠地完成任务。您适合在职场中担任分析性、组织性的工作，例如项目经理、工程师、会计等需要精确性和可靠性的职位。在人际关系中，您忠诚可靠，但有时可能显得过于严肃或保守。",
        traits: ["务实可靠", "注重细节", "有条理", "负责任"]
      },
      "ISFJ": {
        type: "ISFJ",
        name: "保护者型",
        description: "您善良、有同情心，非常重视责任和义务。您注重实际，善于观察细节，并乐于帮助他人。在工作中，您可靠、勤奋，喜欢有秩序的环境。您适合从事教育、医疗、社会工作等需要关怀和细心的职业。在人际关系中，您忠诚体贴，但有时可能过于敏感或难以表达自己的需求。",
        traits: ["善良体贴", "细致入微", "忠诚可靠", "有责任心"]
      },
      "INFJ": {
        type: "INFJ",
        name: "咨询师型",
        description: "您富有洞察力、理想主义，有强烈的价值观。您善于理解复杂的人际关系，并致力于帮助他人成长。在工作中，您喜欢有意义的、能够实现个人价值的事情。您适合从事心理咨询、教育、艺术等能够帮助他人和表达创意的职业。在人际关系中，您深刻而有同理心，但有时可能过于理想化或回避冲突。",
        traits: ["富有洞察力", "理想主义", "有同理心", "有创造力"]
      },
      "INTJ": {
        type: "INTJ",
        name: "战略家型",
        description: "您独立思考、富有战略眼光，善于解决复杂问题。您注重效率和能力，追求知识和创新。在工作中，您喜欢挑战性的、能够发挥智力的任务。您适合从事科研、技术开发、战略规划等需要分析和创新能力的职业。在人际关系中，您独立而理性，但有时可能显得冷漠或过于批判。",
        traits: ["独立思考", "富有远见", "理性分析", "追求卓越"]
      },
      "ISTP": {
        type: "ISTP",
        name: "巧匠型",
        description: "您冷静、灵活，善于动手解决问题。您喜欢行动自由，对机械和工具感兴趣。在工作中，您注重实际效果，喜欢即兴发挥。您适合从事技术、工程、体育等需要动手能力和灵活性的职业。在人际关系中，您独立而随和，但有时可能显得疏离或不愿承诺。",
        traits: ["动手能力强", "灵活应变", "冷静理性", "注重实际"]
      },
      "ISFP": {
        type: "ISFP",
        name: "艺术家型",
        description: "您温和、敏感，有艺术气质和审美眼光。您注重当下体验，享受生活中的美好事物。在工作中，您喜欢有创造性的、能够表达自我的任务。您适合从事艺术、设计、园艺等需要审美和创造力的职业。在人际关系中，您体贴而友善，但有时可能过于回避冲突或难以做决定。",
        traits: ["富有艺术感", "温和体贴", "注重当下", "灵活适应"]
      },
      "INFP": {
        type: "INFP",
        name: "治愈者型",
        description: "您理想主义、有同情心，重视个人价值。您善于理解他人，渴望创造有意义的生活。在工作中，您喜欢有使命感的、能够表达价值观的事情。您适合从事写作、咨询、社会工作等能够帮助他人和表达创意的职业。在人际关系中，您忠诚而有深度，但有时可能过于理想化或敏感。",
        traits: ["理想主义", "富有同情心", "有创造力", "忠于价值"]
      },
      "INTP": {
        type: "INTP",
        name: "思想家型",
        description: "您理性、好奇，喜欢理论和抽象思维。您善于分析复杂问题，追求知识和理解。在工作中，您喜欢独立思考、解决智力挑战。您适合从事科研、哲学、技术等需要分析和创新能力的职业。在人际关系中，您独立而开放，但有时可能显得疏离或过于批判。",
        traits: ["理性分析", "好奇心强", "独立思考", "追求知识"]
      },
      "ESTP": {
        type: "ESTP",
        name: "挑战者型",
        description: "您精力充沛、务实，善于即兴发挥。您喜欢行动和冒险，善于应对危机。在工作中，您注重实际结果，喜欢灵活多变的环境。您适合从事销售、体育、创业等需要应变能力和行动力的职业。在人际关系中，您活泼而直接，但有时可能显得冲动或不耐烦。",
        traits: ["行动导向", "灵活应变", "务实高效", "充满活力"]
      },
      "ESFP": {
        type: "ESFP",
        name: "表演者型",
        description: "您热情、友善，喜欢与他人互动。您享受当下，善于营造欢乐氛围。在工作中，您喜欢与人打交道、实际操作的岗位。您适合从事表演、销售、服务等需要人际技巧和活力的职业。在人际关系中，您热情而体贴，但有时可能过于关注外在或回避复杂问题。",
        traits: ["热情友善", "善于交际", "注重当下", "充满乐趣"]
      },
      "ENFP": {
        type: "ENFP",
        name: "倡导者型",
        description: "您充满创意与激情，热衷于探索新领域并激发他人。您善于看到可能性，有感染力。在工作中，您喜欢有创意的、能够帮助他人成长的岗位。您适合从事市场营销、广告创意、教育等需要创造力和人际技巧的职业。在人际关系中，您热情而真诚，但有时可能过于理想化或分心。",
        traits: ["充满创意", "热情洋溢", "善于沟通", "富有洞察力"]
      },
      "ENTP": {
        type: "ENTP",
        name: "发明家型",
        description: "您聪明、创新，善于辩论和提出新想法。您喜欢智力挑战，善于看到各种可能性。在工作中，您喜欢创业、策略等需要创新和应变能力的岗位。您适合从事发明、咨询、创业等需要分析和创造力的职业。在人际关系中，您机智而开放，但有时可能过于争辩或不敏感。",
        traits: ["聪明机智", "创新思维", "善于辩论", "充满创意"]
      },
      "ESTJ": {
        type: "ESTJ",
        name: "管理者型",
        description: "您实际、果断，善于组织和管理。您重视秩序和效率，喜欢领导他人。在工作中，您喜欢有明确目标和结构的岗位。您适合从事管理、行政、法律等需要组织和执行能力的职业。在人际关系中，您直接而负责，但有时可能显得固执或缺乏耐心。",
        traits: ["组织能力强", "务实高效", "果断坚定", "责任感强"]
      },
      "ESFJ": {
        type: "ESFJ",
        name: "主人型",
        description: "您友善、负责，善于照顾他人。您重视和谐，喜欢组织社交活动。在工作中，您喜欢服务他人、有明确职责的岗位。您适合从事教育、医疗、服务等需要关怀和组织能力的职业。在人际关系中，您体贴而可靠，但有时可能过于在意他人评价或回避冲突。",
        traits: ["友善体贴", "善于合作", "责任心强", "注重和谐"]
      },
      "ENFJ": {
        type: "ENFJ",
        name: "教育家型",
        description: "您有魅力、善于沟通，善于帮助他人成长。您重视人际关系，有领导才能。在工作中，您喜欢教育、咨询等能够影响和帮助他人的岗位。您适合从事教育、咨询、人力资源等需要人际和领导能力的职业。在人际关系中，您支持而热情，但有时可能过于理想化或忽视自己的需求。",
        traits: ["善于沟通", "有领导力", "富有同理心", "善于激励"]
      },
      "ENTJ": {
        type: "ENTJ",
        name: "指挥官型",
        description: "您果断、有战略眼光，善于领导和组织。您注重效率和结果，喜欢挑战。在工作中，您喜欢领导、创业等需要决策和战略能力的岗位。您适合从事管理、创业、咨询等需要领导和规划能力的职业。在人际关系中，您直接而自信，但有时可能显得专横或不敏感。",
        traits: ["果断决策", "战略思维", "领导能力强", "注重效率"]
      }
    };

    let currentQuestion = 0;
    let answers = [];
    let personalityScores = {
      E: 0, I: 0,
      S: 0, N: 0,
      T: 0, F: 0,
      J: 0, P: 0
    };

    // 初始化测试
    document.addEventListener('DOMContentLoaded', () => {
      loadQuestion();
      updateProgress();
      
      // 提交测试按钮事件
      document.getElementById('submit-btn').addEventListener('click', submitQuiz);
      
      // 支付按钮事件
      document.getElementById('wechat-pay').addEventListener('click', () => processPayment('微信支付'));
      document.getElementById('alipay-pay').addEventListener('click', () => processPayment('支付宝支付'));
      
      // 反馈按钮事件
      document.getElementById('feedback-btn').addEventListener('click', submitFeedback);
      
      // 准确度反馈交互
      setupAccuracyFeedback();
    });

    // 加载当前问题
    function loadQuestion() {
      const quizForm = document.getElementById('quiz-form');
      quizForm.innerHTML = '';
      
      const q = questions[currentQuestion];
      const questionHTML = `
        <div class="question">
          <p>${currentQuestion + 1}. ${q.question}</p>
          <div class="options">
            ${q.options.map((option, index) => `
              <div class="option" data-index="${index}">
                <input type="radio" name="q${currentQuestion}" id="q${currentQuestion}-${index}" value="${index}">
                <label for="q${currentQuestion}-${index}">${option}</label>
              </div>
            `).join('')}
          </div>
        </div>
      `;
      
      quizForm.innerHTML = questionHTML;
      
      // 添加选项选择事件
      document.querySelectorAll('.option').forEach(option => {
        option.addEventListener('click', function() {
          // 移除其他选项的选中状态
          this.parentNode.querySelectorAll('.option').forEach(opt => {
            opt.classList.remove('selected');
          });
          
          // 设置当前选项为选中状态
          this.classList.add('selected');
          
          // 选中单选按钮
          const radio = this.querySelector('input[type="radio"]');
          radio.checked = true;
          
          // 保存答案
          answers[currentQuestion] = parseInt(this.dataset.index);
          
          // 自动进入下一题（如果不是最后一题）
          setTimeout(() => {
            if (currentQuestion < questions.length - 1) {
              currentQuestion++;
              loadQuestion();
              updateProgress();
            }
          }, 500);
        });
      });
    }

    // 更新进度条
    function updateProgress() {
      const progress = ((currentQuestion + 1) / questions.length) * 100;
      document.getElementById('progress-fill').style.width = `${progress}%`;
      document.getElementById('progress-text').textContent = `问题 ${currentQuestion + 1}/${questions.length}`;
    }

    // 提交测试
    function submitQuiz() {
      // 确保所有问题都已回答
      if (answers.length < questions.length) {
        alert('请完成所有问题后再提交！');
        return;
      }
      
      // 计算性格类型
      calculatePersonality();
      
      // 显示支付页面
      document.getElementById('quiz-container').classList.add('hidden');
      document.getElementById('payment-container').classList.remove('hidden');
    }

    // 计算性格类型
    function calculatePersonality() {
      // 重置分数
      for (let key in personalityScores) {
        personalityScores[key] = 0;
      }
      
      // 统计每个维度的分数
      questions.forEach((q, index) => {
        const dimension = q.dimension;
        const optionIndex = answers[index];
        
        // 每个维度的第一个字母对应选项0，第二个字母对应选项1
        if (optionIndex === 0) {
          personalityScores[dimension[0]]++;
        } else if (optionIndex === 1) {
          personalityScores[dimension[1]]++;
        }
      });
      
      // 确定性格类型
      const ei = personalityScores.E > personalityScores.I ? 'E' : 'I';
      const sn = personalityScores.S > personalityScores.N ? 'S' : 'N';
      const tf = personalityScores.T > personalityScores.F ? 'T' : 'F';
      const jp = personalityScores.J > personalityScores.P ? 'J' : 'P';
      
      const personalityType = ei + sn + tf + jp;
      
      // 保存结果
      localStorage.setItem('personalityResult', personalityType);
    }

    // 处理支付
    function processPayment(method) {
      // 模拟支付成功
      document.getElementById('payment-container').classList.add('hidden');
      
      // 显示结果
      showResults();
    }

    // 显示结果
    function showResults() {
      const resultContainer = document.getElementById('result-container');
      resultContainer.classList.remove('hidden');
      
      const personalityType = localStorage.getItem('personalityResult') || 'ENFP';
      const result = results[personalityType];
      
      document.getElementById('personality-type').textContent = personalityType;
      document.getElementById('result-text').textContent = result.description;
      
      // 更新性格特质
      const traitsContainer = document.querySelector('.traits');
      traitsContainer.innerHTML = '';
      result.traits.forEach(trait => {
        traitsContainer.innerHTML += `<span class="trait">${trait}</span>`;
      });
    }

    // 设置准确度反馈
    function setupAccuracyFeedback() {
      const points = document.querySelectorAll('.meter-point');
      const accuracyText = document.getElementById('accuracy-text');
      
      points.forEach(point => {
        point.addEventListener('click', function() {
          const value = parseInt(this.dataset.value);
          
          // 更新选中的点
          points.forEach((p, index) => {
            if (index < value) {
              p.classList.add('active');
            } else {
              p.classList.remove('active');
            }
          });
          
          // 更新文本
          const texts = ['非常不准确', '不太准确', '一般准确', '比较准确', '非常准确'];
          accuracyText.textContent = texts[value - 1];
        });
      });
    }

    // 提交反馈
    function submitFeedback() {
      const activePoints = document.querySelectorAll('.meter-point.active').length;
      if (activePoints === 0) {
        alert('请选择准确度评分！');
        return;
      }
      
      alert(`感谢您的反馈！您选择了 ${activePoints} 星评价。`);
      // 这里可以添加实际的反馈提交逻辑
    }
  </script>
</body>
</html>



